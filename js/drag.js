function getClientCoords(e){return e.getBoundingClientRect()}function getPageCoords(e){e=e.getBoundingClientRect();return{top:e.top+window.pageYOffset,right:e.right+window.pageXOffset,bottom:e.bottom+window.pageYOffset,left:e.left+window.pageXOffset}}function setElementTopLeft(e,t){e.style.left=t.left+"px",e.style.top=t.top+"px"}function toggleFixedPosition(e,t={}){var o;t.event&&t.event.stopPropagation(),"fixed"==t.set||"absolute"!=t.set&&"fixed"!=e.style.position?(o=getClientCoords(e),e.style.position="fixed",setElementTopLeft(e,o),e.querySelector(".popupHeader").querySelector(".popupHeaderButtongroup").querySelector(".popupHeaderButtonSticky").innerHTML="&#9679;"):"absolute"!=t.set&&"absolute"==e.style.position||(o=getPageCoords(e),e.style.position="absolute",setElementTopLeft(e,o),e.querySelector(".popupHeader").querySelector(".popupHeaderButtongroup").querySelector(".popupHeaderButtonSticky").innerHTML="&#9675;")}function sendToTop(e){var t,o,n=document.getElementsByTagName("article")[0];n.lastChild!==e&&(o=(t=e.querySelector(".popupContent")).firstElementChild.scrollTop,n.append(e),t.firstElementChild.scrollTop=o)}function toggleDragEnabled(n,e={}){e.event&&e.event.stopPropagation();let s,l,i=-1,p=-1,r=!1;const t=n.querySelector(".popupHeader");function o(e){var t=e.clientX-s,o=e.clientY-l,e=(s=e.clientX,l=e.clientY,getClientCoords(n));n.style.top=n.offsetTop+o+"px",e.left+t<=0||0<p&&i+t<p?(i<0&&(i=p=e.right),i+=t,n.style.right=screen.width-i+"px",n.style.removeProperty("left")):(n.style.left=n.offsetLeft+t+"px",n.style.removeProperty("right"),i=p=-1),r|=0!=t||0!=o}function u(){t.onmouseup=null,document.onmouseup=null,document.onmousemove=null,r||(n.classList.contains("isCollapsed")?n.classList.remove("isCollapsed"):n.classList.add("isCollapsed")),r=!1}n.onclick=e=>{sendToTop(n),e.stopPropagation()},t.onmousedown?(t.onmousedown=null,toggleFixedPosition(n,{set:"absolute"}),n.classList.remove("dragEnabled"),n.classList.remove("isCollapsed"),e=getPageCoords(e.event.target),setElementTopLeft(n,{left:e.left,top:e.bottom}),n.style.removeProperty("right")):(setElementTopLeft(n,getPageCoords(n)),sendToTop(n),t.onmousedown=function(e){s=e.clientX,l=e.clientY,t.onmouseup=u,document.onmouseup=u,document.onmousemove=o,sendToTop(n)},n.classList.add("dragEnabled"))}function showPopup(e,t){sendToTop(e),e.classList.add("visible"),e.classList.contains("dragEnabled")||setElementTopLeft(e,{left:(e=getPageCoords(t)).left,top:e.bottom})}function hidePopup(e){e.classList.remove("visible")}window.onload=function(){for(const e of document.getElementsByClassName("popup"))sendToTop(e)};